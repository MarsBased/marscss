<%
  current_page.data.active += (current_page.data.active) ? ', documentation' : 'documentation'
%>

<% wrap_layout :layout do %>
  <div class="wrapper">
    <div class="documentation-menu">
      <ul class="sidebar-menu">
      <% data.documentation_menu.each do |page| %>
        <% content_tag(:li, class: active(page.name)) do %>
          <%= link_to page.name,
          "/documentation/#{page.url || page.name.parameterize}" %>
        <% end %>
        <% if active(page.name) %>
          <ul>
            <% page.subpages.each do |subpage|%>
              <% content_tag(:li, class: active(subpage.name)) do %>
                <%= link_to subpage.name,
                  "/documentation/#{subpage.url || subpage.name.parameterize}" %>
              <% end %>
            <% end %>
          </ul>
        <% end %>
      <% end %>
      </ul>
    </div>
    <div class="documentation-content" data-headings-add-anchor>
       <%= yield %>
    </div>
  </div>
<% end %>
